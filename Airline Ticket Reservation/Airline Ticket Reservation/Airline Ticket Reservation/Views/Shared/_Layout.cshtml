<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

</head>
<body>
    <div class="page">
        <div id="header">
            <div id="title">
                <h1>Airlines Ticket Reservation</h1>
            </div>
            @*<div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>*@
            <div id="menucontainer">
                <ul id="menu">
                    <li id="lihome"><a style="font-size:22px" href='@Url.Action("Index", "Home")'>Home</a></li>
                    <li id="liabout"><a style="font-size:22px" href='@Url.Action("About", "Home")'>About Us</a></li>
                    <li id="licontact"><a style="font-size:22px" href='@Url.Action("Contact", "Home")'>Contact Us</a></li>
                    <li id="lilogin"><a style="font-size:22px" href='@Url.Action("Login", "Account")'>Login</a></li>

                    <li id="liaHome"><a style="font-size: 18px" href='@Url.Action("Home", "Admin")'>Home</a></li>
                    <li id="liamRegistration"><a style="font-size: 18px" href='@Url.Action("ManagerRegistration", "Admin")'>Add Managers</a></li>
                    <li id="liaviewManager"><a style="font-size: 18px" href='@Url.Action("ViewManager", "Admin")'>View Managers</a></li>
                    <li id="liaAddFlight"><a style="font-size: 18px" href='@Url.Action("AddNewFlight", "Admin")'>Add Flight</a></li>
                    <li id="liaViewFlight"><a style="font-size: 18px" href="@Url.Action("FlighDetails", "Admin")">View Flight</a>

                    <li id="limHome"><a style="font-size:20px" href='@Url.Action("Home", "Manager")'>Home</a></li>
                    <li id="limViewflight"><a style="font-size:20px" href='@Url.Action("FlighDetails", "Manager")'>Flight Details</a></li>
                    <li id="limviewreservations"><a style="font-size:20px" href='@Url.Action("ViewReservations", "Manager")'>Reservations</a></li>
                    <li id="limChange"><a style="font-size:20px" href='@Url.Action("ChangePassword", "Manager")'>Credentials</a></li>

                    <li id="liuhome"><a style="font-size: 20px" href='@Url.Action("Home", "Customer")'>Home</a></li>                    
                    <li id="liusearch"><a style="font-size: 20px" href='@Url.Action("Search", "Customer")'>Search</a></li>
                    <li id="liuviewreservations"><a style="font-size: 20px" href='@Url.Action("History", "Customer")'>Reservations</a></li>
                    <li id="liuchange"><a style="font-size: 20px" href='@Url.Action("ChangePassword", "Customer")'>Credentials</a></li>

                    <li id="liLogout"><a style="font-size: 20px" href='@Url.Action("LogOut", "Account")'>LogOut</a></li>

                </ul>
            </div>
        </div>
        <div id="main">
            @RenderBody()
        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html>

<script type="text/javascript">

    //$(document).ready(function () {
    var referrer = document.referrer;

    $("#liLogout").click(function () {
        window.open(window.location.href + "?userype=", "_self");
        var url = window.location.href;
        window.location.href = url;
        referrer = url;
        return true;


    });

    var logout = false;

    if (window.location.href.indexOf("logout") >= 0 || window.location.href.indexOf("isEdit") >= 0) {
        logout = true;
    }

    if (!logout) {
        var backuserype = "";
        if (referrer != "") {

            if (referrer.indexOf("userype") >= 0) {

                var vars = [], hash;
                var hashes = referrer.slice(referrer.indexOf('?') + 1).split('&');
                for (var i = 0; i < hashes.length; i++) {
                    hash = hashes[i].split('=');
                    vars.push(hash[0]);
                    vars[hash[0]] = hash[1];
                    backuserype = hash[1];
                }
            }
        }

        var userype = getUrlVars()["userype"];

        if (userype == undefined) {
            userype = backuserype;
            window.open(window.location.href + "?userype=" + userype, "_self");
        }



        if (userype == "Admin") {

            $('#lihome').hide();
            $('#liabout').hide();
            $('#licontact').hide();
            $('#lilogin').hide();

            $('#limHome').hide();
            $('#limViewflight').hide();
            $('#limviewreservations').hide();
            $('#limChange').hide();

            $('#liuhome').hide();            
            $('#liusearch').hide();
            $('#liuviewreservations').hide();
            $('#liuchange').hide();
        }

        else if (userype == "Manager") {

            $('#lihome').hide();
            $('#liabout').hide();
            $('#licontact').hide();
            $('#lilogin').hide();

            $('#liaHome').hide();
            $('#liamRegistration').hide();
            $('#liaviewManager').hide();
            $('#liaAddFlight').hide();
            $('#liaViewFlight').hide();

            $('#liuhome').hide();            
            $('#liusearch').hide();
            $('#liuviewreservations').hide();
            $('#liuchange').hide();
        }

        else if (userype == "User") {

            $('#lihome').hide();
            $('#liabout').hide();
            $('#licontact').hide();
            $('#lilogin').hide();

            $('#liaHome').hide();
            $('#liamRegistration').hide();
            $('#liaviewManager').hide();
            $('#liaAddFlight').hide();
            $('#liaViewFlight').hide();

            $('#limHome').hide();
            $('#limViewflight').hide();
            $('#limviewreservations').hide();
            $('#limChange').hide();
        }
        else if (userype == "Guest") {

            $('#lihome').hide();
            $('#liabout').hide();
            $('#licontact').hide();
            $('#lilogin').hide();

            $('#liaHome').hide();
            $('#liamRegistration').hide();
            $('#liaviewManager').hide();
            $('#liaAddFlight').hide();
            $('#liaViewFlight').hide();

            $('#limHome').hide();
            $('#limViewflight').hide();
            $('#limviewreservations').hide();
            $('#limChange').hide();

            $('#liuviewreservations').hide();
            $('#liuchange').hide();
        }
        else {
            $('#liaHome').hide();
            $('#liamRegistration').hide();
            $('#liaviewManager').hide();
            $('#liaAddFlight').hide();
            $('#liaViewFlight').hide();

            $('#limHome').hide();
            $('#limViewflight').hide();
            $('#limviewreservations').hide();
            $('#limChange').hide();

            $('#liuhome').hide();            
            $('#liusearch').hide();
            $('#liuviewreservations').hide();
            $('#liuchange').hide();
            $('#liLogout').hide();
        }
    }
    else {
        $('#liaHome').hide();
        $('#liamRegistration').hide();
        $('#liaviewManager').hide();
        $('#liaAddFlight').hide();
        $('#liaViewFlight').hide();

        $('#limHome').hide();
        $('#limViewflight').hide();
        $('#limviewreservations').hide();
        $('#limChange').hide();

        $('#liuhome').hide();
        $('#liubook').hide();
        $('#liusearch').hide();
        $('#liuviewreservations').hide();
        $('#liuchange').hide();
        $('#liLogout').hide();
    }


    //});

    function getUrlVars() {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }

    //$("#txtfcompany").change(function () {
    //    $(function () {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/Account/Registration',
    //            data: {
    //                flightName: $('#txtfcompany option:selected').val(),
    //            },
    //            contentType: "application/json",
    //            dataType: "json",
    //            success: function (r) {
    //                var ddlCustomers = $("[id*=txtfcompany]");
    //                ddlCustomers.empty().append('<option selected="selected" value="0">Please select</option>');
    //                $.each(r.d, function () {
    //                    ddlCustomers.append($("<option></option>").val(this['Value']).html(this['Text']));
    //                });
    //            }
    //        });
    //    });
    //});
</script>

<script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#txtfcompany").change(function () {

            if ($("#txtfcompany").val() == "spicejet") {
                $('#txtfno').html("");
                $('#txtfno').append($("<option></option>").val("te387s").html("te387s"));
                $('#txtfno').append($("<option></option>").val("ap54f").html("ap54f"));
            }

            if ($("#txtfcompany").val() == "air india") {
                $('#txtfno').html("");
                $('#txtfno').append($("<option></option>").val("us78Y").html("us78Y"));
                $('#txtfno').append($("<option></option>").val("99").html("99"));
            }
        });

        $("#txtfno").change(function () {

            $('#txtarrdate').val();
            $('#txtArrivTime').val();
            $('#txtdepdate').val();
            $('#txtdeptime').val();
            $('#txtsource').val();
            $('#txtdestination').val();
            $('#txtnoofseats').val();
            $('#txtamt').val();
            $('#txtamt').val();
            $('#txtarrdate').val(new Date());
            $('#txtArrivTime').val("10 AM");
            $('#txtdepdate').val("1 PMM");
            $('#txtdeptime').val("2 PM");
            $('#txtsource').val("Hyderabad");
            $('#txtdestination').val("Delhi");
            $('#txtnoofseats').val("10");
            $('#txtamt').val("100$");

        });

        //    $.ajax({
        //        type: "POST",
        //        url: "/Account/FlighCompnay",
        //        data: { flightName: "Rja" },
        //        dataType: "json",
        //        contentType: "application/json; charset=utf-8",
        //        success: function (data) {
        //            var jsdata = JSON.parse(data.d);
        //            $.each(jsdata, function (key, value) {
        //                $('#<%=DropDownList1.ClientID%>')
        //                                                      .append($("<option></option>").val(value.ID).html(value.Name));
        //            });
        //        },
        //        error: function (data) {
        //            alert("error found");
        //        }
        //    });
        //});
    });
</script>
